{% extends 'base.html' %}
{% load static %}

{% block title %}Test Result - CardBots Arena{% endblock %}

{% block extra_css %}
<style>
    main {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding-bottom: 50px;
    }
    .result-container {
        width: 600px;
    }
</style>
{% endblock %}

{% block content %}
<main>
    <div class="welcome-section">
        <h1 class="welcome-title">Test Results</h1>
        <p class="welcome-subtitle">Your bot was successfully tested. Below are the results:</p>
    </div>

    <div class="result-container">
        {% if results %}
            <div class="cyber-box box-blue">
                <h2>Match Result</h2>
                <div style="margin: 20px 0;">
                    <p style="color: #ccc; font-size: 1.1rem; margin-bottom: 10px;">
                        Opponents: <span style="color: white; font-weight: bold;">{{ results.0.opponents|join:", " }}</span>
                    </p>
                    <p style="color: #ccc; font-size: 1.1rem; margin-bottom: 20px;">
                        Winner: <span style="color: #44ff44; font-weight: bold; font-family: 'Orbitron', sans-serif;">{{ results.0.winner }}</span>
                    </p>
                </div>

                <div style="display: flex; gap: 15px; justify-content: center;">
                    <a href="{% url 'test_replay' results.0.match.id %}" class="btn-submit" style="text-decoration: none; text-align: center; flex: 1;">
                        Replay Game
                    </a>
                </div>
            </div>
        {% else %}
            <div class="cyber-box box-red">
                <p style="text-align: center;">No results available.</p>
            </div>
        {% endif %}

        <div style="margin-top: 30px; text-align: center;">
            <form method="POST" action="{% url 'upload_bot' %}">
                {% csrf_token %}
                <input type="hidden" name="bot_name" value="{{ testbot.name }}">
                <input type="hidden" name="bot_file_path" value="{{ testbot.file.path }}">
                <button type="submit" class="btn-upload">
                    Upload Bot Permanently
                </button>
            </form>
        </div>
    </div>
</main>
{% endblock %}
