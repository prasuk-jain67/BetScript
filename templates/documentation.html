{% extends "base.html" %}
{% load static %}

{% block title %}How to Play - CardBots Arena{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/tokyo-night-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<style>
    main {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 40px 100px;
        overflow-y: auto;
    }
    .doc-section {
        margin-bottom: 40px;
    }
    .doc-section h1, .doc-section h2, .doc-section h3 {
        font-family: 'Orbitron', sans-serif;
        color: white;
        margin-bottom: 20px;
        text-transform: uppercase;
        letter-spacing: 2px;
    }
    .doc-section h1 {
        font-size: 3rem;
        text-shadow: 0 0 15px var(--primary-red);
        color: var(--primary-red);
    }
    .doc-section p, .doc-section li {
        color: #ccc;
        font-size: 1.15rem;
        line-height: 1.6;
        margin-bottom: 15px;
    }
    .cyber-box pre {
        background: rgba(0, 0, 0, 0.4) !important;
        margin: 0;
        padding: 10px;
        border-radius: 4px;
    }
    .cyber-box code {
        font-family: 'Fira Code', 'Courier New', monospace;
    }
    .method-card {
        margin-bottom: 20px;
    }
    .highlight-text {
        color: var(--primary-blue);
        font-weight: bold;
    }
</style>
{% endblock %}

{% block content %}
<main>
    <div class="doc-section">
        <h1>How to Create a Poker Bot</h1>
        <p>We will be using <span class="highlight-text">Python</span> and its library called <span class="highlight-text">PyPokerEngine</span>.</p>
    </div>

    <div class="doc-section">
        <div class="cyber-box box-blue">
            <h2>Steps to Create a Poker AI Bot</h2>
            <ol>
                <li>Create a <code>PokerBot</code> class that is a subclass of <code>PypokerEngine.players.BasePokerPlayer</code>.</li>
                <li>Implement the abstract methods that inherit from the <code>BasePokerPlayer</code> class.</li>
            </ol>
        </div>
    </div>

    <div class="doc-section">
        <h2>Methods to Implement</h2>
        <p>The <code>BasePokerPlayer</code> class requires you to implement 6 methods. However, we have made the task easier for you. We have created a class <code class="highlight-text">CountingBot</code> which inherits all required methods from <code>BasePokerPlayer</code>. This serves as a parent bot.</p>
        <p>You only need to tinker with the <code class="highlight-text">declare_action(...)</code> portion. Create a class whose superclass will be this <code>CountingBot</code> and then put in your code in the <code>declare_action</code> method.</p>
    </div>

    <div class="doc-section">
        <div class="cyber-box box-gold">
            <h2>Install the Library</h2>
            <pre><code class="language-bash">pip install PyPokerEngine</code></pre>
        </div>
    </div>

    <div class="doc-section">
        <h2>Sample Bot 1: Random Bot</h2>
        <div class="cyber-box box-red">
            <pre><code class="language-python">
# Random bot
class RBot(CountingBot):
    def __init__(self):
        super().__init__("Pbot")
    def declare_action(self, valid_actions, hole_card, round_state):
        import random
        rand = random.random()
        if rand < 0.5:
            action = next(action for action in valid_actions if action["action"] == "call")
        elif rand < 0.8:
            action = next(action for action in valid_actions if action["action"] == "raise")
        else:
            action = next(action for action in valid_actions if action["action"] == "fold")
        
        amount = action.get("amount")
        if isinstance(amount, dict):
            amount = amount.get("min", 0)

        self.game_history.append({
            "round_state": round_state,
            "valid_actions": valid_actions,
            "action_taken": (action, amount)
        })

        return action["action"], int(amount or 0)</code></pre>
        </div>
    </div>

    <div class="doc-section">
        <div class="cyber-box box-blue">
            <h2>Note on Tracking</h2>
            <p>You must insert the following code snippet in the <code>declare_action</code> portion of your code. This is necessary for tracking the moves played by your bot, which is required for generating game replays.</p>
            <pre><code class="language-python">
self.game_history.append({
    "round_state": round_state,
    "valid_actions": valid_actions,
    "action_taken": (action, amount)
})</code></pre>
        </div>
    </div>

    <div class="doc-section" style="padding-bottom: 100px;">
        <h2>Winning Strategy</h2>
        <p>So instead of going all-in and playing aggressively, we encourage you to find/design algorithms to play Poker. The best bot can be created only by a combination of <span class="highlight-text">game theory, statistics and machine learning</span>!</p>
    </div>
</main>
{% endblock %}
